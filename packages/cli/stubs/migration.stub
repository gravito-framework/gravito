import { sql } from 'drizzle-orm'
import type { AtlasOrbit } from '@gravito/atlas'

export async function up(db: AtlasOrbit): Promise<void> {
  await db.connection.execute(sql`
    CREATE TABLE {{ name }}s (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP
    )
  `)
}

export async function down(db: AtlasOrbit): Promise<void> {
  await db.connection.execute(sql`DROP TABLE {{ name }}s`)
}
